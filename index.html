<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø³Ù†Ø§Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† - Ø§Ù„Ø¨Ù‚Ø±Ø©</title>
  <style>
    :root{--g:#1F7A5A;--gold:#D4AF37;--bg:#FEFEFB;--card:#fff;--muted:#6b7280}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Tahoma; background:linear-gradient(135deg,#f3f4f6,var(--bg)); color:#111}
    .wrap{max-width:720px;margin:0 auto;padding:16px}
    header{background:linear-gradient(135deg,var(--g),#2a9d6b);color:#fff;border-radius:14px;padding:18px 16px;box-shadow:0 10px 30px rgba(31,122,90,.18)}
    header h1{margin:0;font-size:24px}
    header p{margin:6px 0 0;opacity:.95}
    .card{background:var(--card);border-radius:14px;padding:16px;margin-top:14px;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .btn{width:100%;border:0;border-radius:14px;padding:16px 14px;font-size:18px;font-weight:700;cursor:pointer}
    .btnPrimary{background:linear-gradient(135deg,var(--g),#2a9d6b);color:#fff}
    .btnGhost{background:#f3f4f6;color:var(--g);border:2px solid var(--g)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .ayahBox{border-right:6px solid var(--gold);background:linear-gradient(135deg,#fafafa,#fff);border-radius:14px;padding:18px;text-align:center}
    .ayahText{font-size:26px;line-height:2;color:var(--g);font-weight:700}
    .small{color:var(--muted);font-size:13px}
    .nav{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:10px}
    .nav button{padding:12px;border-radius:12px;border:0;font-weight:800;cursor:pointer}
    .nav .g{background:#f3f4f6;color:var(--g);border:2px solid var(--g)}
    .stars{font-size:26px;letter-spacing:4px;margin:10px 0 0}
    .hint{background:#fff7ed;border:2px dashed #f59e0b;border-radius:12px;padding:12px;margin-top:12px}
    .hide{display:none}
  </style>
</head>
<body>
<div class="wrap">

  <div id="home">
    <header>
      <h1>Ø³Ù†Ø§Ù… Ø§Ù„Ù‚Ø±Ø¢Ù†</h1>
      <p>Ø­ÙØ¸ ÙˆØªØ³Ù…ÙŠØ¹ Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„</p>
    </header>

    <div class="card">
      <button class="btn btnPrimary" onclick="go('#/ayah/1')">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ğŸš€</button>
      <div style="height:10px"></div>
      <div class="row">
        <button class="btn btnGhost" onclick="go('#/progress')">Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙ‚Ø¯Ù… â­</button>
        <button class="btn btnGhost" onclick="go('#/parent')">ØµÙØ­Ø© Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ† ğŸ”’</button>
      </div>
    </div>
  </div>

  <div id="progress" class="hide">
    <div class="card">
      <button class="btn btnGhost" onclick="go('#/')">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
      <h2 style="margin:14px 0 8px;color:var(--g)">Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙ‚Ø¯Ù…</h2>
      <div id="pList"></div>
    </div>
  </div>

  <div id="ayah" class="hide">
    <div class="card">
      <button class="btn btnGhost" onclick="go('#/progress')">â¬…ï¸ Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø®Ø±ÙŠØ·Ø©</button>
      <div class="ayahBox" style="margin-top:12px">
        <div class="small" id="ayahMeta"></div>
        <div class="ayahText" id="ayahText"></div>
        <div class="stars" id="stars">â­</div>
      </div>

      <div class="nav">
        <button class="g" onclick="prevAyah()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button class="g" onclick="markDone()">ØªÙ…Ù‘ Ø§Ù„Ø­ÙØ¸ âœ…</button>
        <button class="g" onclick="nextAyah()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn btnGhost" onclick="wrong()">ØºÙ„Ø·Øª ğŸ””</button>
        <button class="btn btnGhost" onclick="go('#/')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </button>
      </div>

      <div id="hint" class="hint hide">
        <div style="font-weight:900;color:#92400e">ØµØ­Ù‘Ø­ Ù‡Ù†Ø§:</div>
        <div id="hintText" style="margin-top:6px; font-size:18px; color:#111"></div>
        <div class="small" style="margin-top:6px">Ø§Ø¶ØºØ· â€œØ§Ù„ØªØ§Ù„ÙŠ/Ø§Ù„Ø³Ø§Ø¨Ù‚â€ Ø£Ùˆ â€œØªÙ…Ù‘ Ø§Ù„Ø­ÙØ¸â€ Ø¨Ø¹Ø¯ Ù…Ø§ ØªØ¹Ø§ÙˆØ¯.</div>
      </div>
    </div>
  </div>

  <div id="parent" class="hide">
    <div class="card">
      <button class="btn btnGhost" onclick="go('#/')">â¬…ï¸ Ø±Ø¬ÙˆØ¹</button>
      <h2 style="margin:14px 0 8px;color:var(--g)">ØµÙØ­Ø© Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ†</h2>
      <div class="small">PIN Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: 2580</div>
      <input id="pin" type="password" inputmode="numeric" maxlength="4"
             style="width:100%;margin-top:10px;padding:14px;border-radius:12px;border:2px solid var(--gold);font-size:18px;text-align:center;letter-spacing:10px">
      <div style="height:10px"></div>
      <button class="btn btnPrimary" onclick="checkPin()">Ø¯Ø®ÙˆÙ„</button>
      <div id="parentBox" class="hide" style="margin-top:12px">
        <div class="hint">
          <div><b>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²:</b> <span id="pct"></span></div>
          <div><b>Ø§Ù„Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:</b> <span id="cnt"></span></div>
        </div>
        <div style="height:10px"></div>
        <button class="btn btnGhost" onclick="resetAll()">Ù…Ø³Ø­ Ø§Ù„ØªÙ‚Ø¯Ù… ğŸ”„</button>
      </div>
    </div>
  </div>

</div>

<script>
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø³ÙŠØ·Ø© (10 Ø¢ÙŠØ§Øª Ù„Ù„ØªØ¬Ø±Ø¨Ø©). ØªÙ‚Ø¯Ø± ØªØ²ÙŠØ¯Ù‡Ù… Ù…Ù† Ø¨Ø¹Ø¯.
  const AY = [
    {n:1,t:"Ø§Ù„Ù…"},
    {n:2,t:"Ø°Ù„Ùƒ Ø§Ù„ÙƒØªØ§Ø¨ Ù„Ø§ Ø±ÙŠØ¨ ÙÙŠÙ‡ Ù‡Ø¯Ù‰ Ù„Ù„Ù…ØªÙ‚ÙŠÙ†"},
    {n:3,t:"Ø§Ù„Ø°ÙŠÙ† ÙŠØ¤Ù…Ù†ÙˆÙ† Ø¨Ø§Ù„ØºÙŠØ¨ ÙˆÙŠÙ†ÙÙ‚ÙˆÙ† Ù…Ù…Ø§ Ø±Ø²Ù‚Ù†Ø§Ù‡Ù…"},
    {n:4,t:"ÙˆØ§Ù„Ø°ÙŠÙ† ÙŠØ¤Ù…Ù†ÙˆÙ† Ø¨Ù…Ø§ Ø£Ù†Ø²Ù„ Ø¥Ù„ÙŠÙƒ ÙˆÙ…Ø§ Ø£Ù†Ø²Ù„ Ù…Ù† Ù‚Ø¨Ù„Ùƒ ÙˆØ¨Ø§Ù„Ø¢Ø®Ø±Ø© Ù‡Ù… ÙŠÙˆÙ‚Ù†ÙˆÙ†"},
    {n:5,t:"Ø£ÙˆÙ„Ø¦Ùƒ Ø¹Ù„Ù‰ Ù‡Ø¯Ù‰ Ù…Ù† Ø±Ø¨Ù‡Ù… ÙˆØ£ÙˆÙ„Ø¦Ùƒ Ù‡Ù… Ø§Ù„Ù…ÙÙ„Ø­ÙˆÙ†"},
    {n:6,t:"Ø¥Ù† Ø§Ù„Ø°ÙŠÙ† ÙƒÙØ±ÙˆØ§ Ø³ÙˆØ§Ø¡ Ø¹Ù„ÙŠÙ‡Ù… Ø£Ø£Ù†Ø°Ø±ØªÙ‡Ù… Ø£Ù… Ù„Ù… ØªÙ†Ø°Ø±Ù‡Ù… Ù„Ø§ ÙŠØ¤Ù…Ù†ÙˆÙ†"},
    {n:7,t:"Ø®ØªÙ… Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ù‚Ù„ÙˆØ¨Ù‡Ù… ÙˆØ¹Ù„Ù‰ Ø³Ù…Ø¹Ù‡Ù… ÙˆØ¹Ù„Ù‰ Ø£Ø¨ØµØ§Ø±Ù‡Ù… ØºØ´Ø§ÙˆØ© ÙˆÙ„Ù‡Ù… Ø¹Ø°Ø§Ø¨ Ø¹Ø¸ÙŠÙ…"},
    {n:8,t:"ÙˆÙ…Ù† Ø§Ù„Ù†Ø§Ø³ Ù…Ù† ÙŠÙ‚ÙˆÙ„ Ø¢Ù…Ù†Ø§ Ø¨Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ø®Ø± ÙˆÙ…Ø§ Ù‡Ù… Ø¨Ù…Ø¤Ù…Ù†ÙŠÙ†"},
    {n:9,t:"ÙŠØ®Ø§Ø¯Ø¹ÙˆÙ† Ø§Ù„Ù„Ù‡ ÙˆØ§Ù„Ø°ÙŠÙ† Ø¢Ù…Ù†ÙˆØ§ ÙˆÙ…Ø§ ÙŠØ®Ø¯Ø¹ÙˆÙ† Ø¥Ù„Ø§ Ø£Ù†ÙØ³Ù‡Ù… ÙˆÙ…Ø§ ÙŠØ´Ø¹Ø±ÙˆÙ†"},
    {n:10,t:"ÙÙŠ Ù‚Ù„ÙˆØ¨Ù‡Ù… Ù…Ø±Ø¶ ÙØ²Ø§Ø¯Ù‡Ù… Ø§Ù„Ù„Ù‡ Ù…Ø±Ø¶Ø§ ÙˆÙ„Ù‡Ù… Ø¹Ø°Ø§Ø¨ Ø£Ù„ÙŠÙ… Ø¨Ù…Ø§ ÙƒØ§Ù†ÙˆØ§ ÙŠÙƒØ°Ø¨ÙˆÙ†"},
  ];

  const DEFAULT_PIN = "2580";
  let current = 1;

  function go(hash){ location.hash = hash; }
  window.addEventListener("hashchange", render);

  function show(id){
    ["home","progress","ayah","parent"].forEach(x=>document.getElementById(x).classList.add("hide"));
    document.getElementById(id).classList.remove("hide");
  }

  function getAy(n){ return AY.find(a=>a.n===n); }

  function doneKey(n){ return "done_"+n; }
  function isDone(n){ return localStorage.getItem(doneKey(n))==="1"; }

  function renderProgress(){
    const box = document.getElementById("pList");
    box.innerHTML = "";
    AY.forEach(a=>{
      const d = document.createElement("div");
      d.className = "hint";
      d.style.cursor="pointer";
      d.innerHTML = `<div style="font-weight:900;color:var(--g)">Ø¢ÙŠØ© ${a.n} ${isDone(a.n)?"âœ…":"â­•"}</div>
                     <div class="small" style="margin-top:6px">${a.t}</div>`;
      d.onclick = ()=>go(`#/ayah/${a.n}`);
      box.appendChild(d);
    });
  }

  function renderAyah(n){
    const a = getAy(n);
    if(!a){ go("#/"); return; }
    current = n;
    document.getElementById("ayahMeta").textContent = `Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© â€¢ Ø§Ù„Ø¢ÙŠØ© ${a.n}`;
    document.getElementById("ayahText").textContent = a.t;
    document.getElementById("stars").textContent = isDone(n) ? "â­â­â­" : "â­";
    document.getElementById("hint").classList.add("hide");
  }

  function markDone(){
    localStorage.setItem(doneKey(current),"1");
    document.getElementById("stars").textContent = "â­â­â­";
    renderProgress();
  }

  function prevAyah(){ if(current>1) go(`#/ayah/${current-1}`); }
  function nextAyah(){ if(current<AY.length) go(`#/ayah/${current+1}`); }

  // Ø¨ÙŠØ¨ Ø¨Ø³ÙŠØ· (Ø¨Ø¯ÙˆÙ† Ù…Ù„ÙØ§Øª) Ø¹Ø¨Ø± WebAudio
  function beep(){
    try{
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type="square"; o.frequency.value=880;
      g.gain.value=0.08;
      o.connect(g); g.connect(ctx.destination);
      o.start();
      setTimeout(()=>{ o.stop(); ctx.close(); }, 180);
    }catch(e){}
  }

  function wrong(){
    beep();
    if(navigator.vibrate) navigator.vibrate(120);
    const a = getAy(current);
    document.getElementById("hintText").textContent = a ? a.t : "";
    document.getElementById("hint").classList.remove("hide");
  }

  function checkPin(){
    const ok = (document.getElementById("pin").value === DEFAULT_PIN);
    if(!ok){ beep(); alert("PIN ØºÙ„Ø·"); return; }
    const done = AY.filter(a=>isDone(a.n)).length;
    const pct = Math.round((done/AY.length)*100);
    document.getElementById("cnt").textContent = `${done}/${AY.length}`;
    document.getElementById("pct").textContent = `${pct}%`;
    document.getElementById("parentBox").classList.remove("hide");
  }

  function resetAll(){
    if(!confirm("ØªÙ…Ø³Ø­ ÙƒØ§Ù…Ù„ Ø§Ù„ØªÙ‚Ø¯Ù…ØŸ")) return;
    AY.forEach(a=>localStorage.removeItem(doneKey(a.n)));
    document.getElementById("parentBox").classList.add("hide");
    renderProgress();
    go("#/");
  }

  function render(){
    const h = location.hash || "#/";
    if(h==="#/" || h==="#"){ show("home"); return; }
    if(h.startsWith("#/progress")){ show("progress"); renderProgress(); return; }
    if(h.startsWith("#/parent")){ show("parent"); return; }
    const m = h.match(/^#/ayah/(\\d+)/);
    if(m){ show("ayah"); renderAyah(parseInt(m[1],10)); return; }
    show("home");
  }

  // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
  if(!location.hash) location.hash="#/";
  render();
</script>
</body>
</html>
